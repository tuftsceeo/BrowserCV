<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Our CSS -->
        <link href="../style.css" rel="stylesheet" />

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
            crossorigin="anonymous"
        />
    </head>
    
    <body>
        <!-- Bootstrap JavaScript -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"
        ></script>
        
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="../index.html">BrowserCV</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
    
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="../index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../Generate Code Tool/tool.html">Tool</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="../Help/help.html">Help</a>
                </li>
            </div>
            </nav>

            
        <!-- Page Content -->
        <div class="container-fluid">
            <!-- Header -->
            <div class="row help-section">
                <div class="col">
                    <h1>How to use BrowserCV</h1>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-5">
                    <!-- Tool Page -->
                    <div class="row row-help-section">
                        <h3>The Tool Page</h3>
                        <p>
                            Use the <a href="../Generate Code Tool/tool.html">tool</a> page to explore pre-made image processing functions and create a combination that does what you want.
                        </p>
                        <p>
                            Click the <b>Start Video</b> and <b>Start Processing</b> buttons if the input and output video streams don't start automatically.
                        </p>
                        <p>
                            Click on the buttons below the videos to add an image processing function <b>step</b> to the queue of functions. Each step is applied to images sequentially before they are shown. Some steps have outputs. Change the values used for each step if the option is available.
                        </p>
                        <p>
                            Click the <b>X</b> button on a step to remove it, or use the red buttons at the top of the queue to remove the last added step or to clear the queue.
                        </p>
                        <p>
                            When you're done with your function, choose a programming language and click the <b>Generate Code</b> button. This automatically generates code in that language which applies the function created which you can then copy and paste into your own project.
                        </p>
                        <p>
                            The code generated always includes the primary <b>processImage</b> function, and may also include various helper functions which processImage uses. The processImage function can always be found at the bottom of the code.
                        </p>
                        <p>
                            The outputs of the steps selected will always be returned from the processImage function. These outputs are an object, and can be selected from the object using the ID of the function generating the output you want. The specifics of syntax may depend on the language you're using.
                        </p>
                    </div>

                    <!-- Setup in various languages -->
                    <div class="row row-help-section">
                            <h3>How to Set Up a Project to Use Your Function</h3>
                            <!-- HTML & JS -->
                            <div class="row row-help-subsection">
                                <h5>HTML & Javascript</h5>
                                <p>
                                    To use the functions generated by BrowserCV for a webpage, there are a few things that need to be setup.
                                </p>
                                <p>
                                    First, the following HTML must exist within the &lt;head&gt; tag of your page (or alternatively do <a href="https://docs.opencv.org/3.4/d0/d84/tutorial_js_usage.html">this</a>):
                                    <div class="code-highlight">
                                        <pre>
                                            <code>
&lt;script type="text/javascript" src="https://docs.opencv.org/master/opencv.js"&gt;&lt;/script&gt;</code>
                                        </pre>
                                    </div>
                                </p>
                                <p>
                                    Next, you'll need to get an image in a cv.Mat() class. You can find several ways to do this on the <a href="https://docs.opencv.org/3.4/d5/d10/tutorial_js_root.html">opencv.js tutorials</a>, or follow this method to use a webcam. First create <code>&lt;video id="video"&gt;</code> and <code>&lt;canvas id="dst"&gt;</code> tags on your page, then start streaming video from a webcam to the <code>&lt;video&gt;</code> tag when this script is run:
                                    <div class="code-highlight">
                                        <pre>
                                            <code>
const video = document.getElementById("video");
// Set the width and height of the video tag (in pixels)
video.setAttribute("width", 320);
video.setAttribute("height", 240);
// Get access to the camera
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    navigator.mediaDevices
        .getUserMedia({ video: true })
        .then(function (stream) {
            video.srcObject = stream;
            video.play();
        });
}</code>
                                        </pre>
                                    </div>
                                </p>
                                <p>
                                    Sample an image from the video and put it in a cv.Mat() class using this script. Don't forget to run <code>img.delete()</code> when you're done using the image.
                                    <div class="code-highlight">
                                        <pre>
                                            <code>
const video = document.getElementById("video");
const cap = new cv.VideoCapture(video);
let img = new cv.Mat(video.height, video.width, cv.CV_8UC4);
cap.read(img);</code>
                                        </pre>
                                    </div>
                                </p>
                                <p>
                                    Finally, run the image through your processing function (and don't forget to define it and helper functions by copying their code from <a href="../Generate Code Tool/tool.html">the tool</a>) and display it in the canvas we created above:
                                    <div class="code-highlight">
                                        <pre>
                                            <code>
processImage(img);
cv.imshow("dst", img);
img.delete();</code>
                                        </pre>
                                    </div>
                                </p>  
                            </div>

                            <!-- HTML & JS -->
                            <div class="row row-help-subsection">
                                <h5>Python</h5>
                            </div>
                    </div>
                </div>
            </div>
        </div>


    </body>
</html>